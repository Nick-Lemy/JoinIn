<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Registration Page | JoinIn</title>
</head>

<body class="bg-gray-100">
  <div class="min-h-screen flex flex-col justify-center p-4">
    <div class="max-w-sm mx-auto bg-[#0F2449] rounded-2xl w-full py-8 px-6 sm:max-w-md">
      <div class="flex flex-col gap-3">
        <div class="flex flex-col items-center">
          <h1 class="text-3xl sm:text-4xl font-extrabold text-black text-center">Welcome to</h1>
          <img class="w-36 sm:w-48" src="./assets/logo.png" alt="JoinIn Logo" />
        </div>
        <div class="py-6 *bg-transparent flex flex-col gap-5">
          <input id="first_name" placeholder="First Name" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="text" />
          <input id="last_name" placeholder="Last Name" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="text" />
          <input id="phone_number" placeholder="Phone Number" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="number" />
          <input id="email" placeholder="Email" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="email" />
          <input id="password" placeholder="Password" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="password" />
          <input id="confirm_password" placeholder="Confirm Password" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="password" />
        </div>
        <div class="text-white flex justify-between">
          <div class="flex items-center gap-2">
            <input class="w-4 h-4" type="checkbox" name="remember" id="remember">
            <label class="text-sm sm:text-base" for="remember">Remember me</label>
          </div>
          <a class="hover:text-red-500 text-sm sm:text-base" href="#">
            Forgot Password?
          </a>
        </div>
        <div class="flex justify-center py-4 mt-2">
          <a id="register-btn" class="bg-[#A30101] text-base sm:text-lg font-bold text-white rounded-lg w-full text-center py-3 hover:bg-red-800 transition-colors">
            Register
          </a>
        </div>
        <div class="text-center text-white text-sm mt-1">
          <span>Already have an account? </span>
          <a href="/login" class="text-blue-300 hover:underline">Login</a>
        </div>
      </div>
    </div>
  </div>
  <script>
    const first_name = document.getElementById('first_name')
    const last_name = document.getElementById('last_name')
    const phone_number = document.getElementById('phone_number')
    const email = document.getElementById('email')
    const password = document.getElementById('password')
    const confirm_password = document.getElementById('confirm_password')
    const registerButton = document.getElementById('register-btn')
    registerButton.addEventListener('click', () => {
      console.log('clicked')
      if (confirm_password.value === password.value && password.value !== '') {
        fetch('https://joinin-1.onrender.com/api/register', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              first_name: first_name.value,
              last_name: last_name.value,
              phone_number: phone_number.value,
              email: email.value,
              password_hash: password.value,
            })
          }).then(response => {
            console.log(response)
            if (response.ok) {
              window.open('/', '_blank')
            } else {
              alert('credential error')
            }
          })
          .catch(error => {
            console.error('Error:', error);
          });
      } else {
        alert('Password not matching with the confirmed password')
      }
    })
  </script>
</body>

</html>