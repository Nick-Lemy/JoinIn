<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <title>Login Page | JoinIn</title>
</head>

<body class="bg-gray-100">
  <div class="min-h-screen flex flex-col justify-center p-4">
    <div class="max-w-sm mx-auto bg-[#0F2449] rounded-2xl w-full py-8 px-6 sm:max-w-md">
      <div class="flex flex-col gap-3">
        <div class="flex flex-col items-center">
          <h1 class="text-3xl sm:text-4xl font-extrabold text-black text-center">Welcome Back To</h1>
          <img class="w-36 sm:w-48" src="/logo.png" alt="JoinIn Logo" />
        </div>
        <div class="py-6 flex flex-col gap-5">
          <input id="email" placeholder="Email" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="email" />
          <input id="password" placeholder="Password" class="text-white px-4 py-3 w-full border border-white rounded-lg bg-transparent text-base" type="password" />
        </div>
        <div class="text-white flex justify-between">
          <div class="flex items-center gap-2">
            <input class="w-4 h-4" type="checkbox" name="remember" id="remember">
            <label class="text-sm sm:text-base" for="remember">Remember me</label>
          </div>
          <a class="hover:text-red-500 text-sm sm:text-base" href="#">
            Forgot Password?
          </a>
        </div>
        <div class="flex justify-center py-4 mt-2">
          <a id="login-btn" class="bg-[#A30101] text-base sm:text-lg font-bold text-white rounded-lg w-full text-center py-3 hover:bg-red-800 transition-colors">
            LogIn
          </a>
        </div>
        <div class="text-center text-white text-sm mt-1">
          <span>Don't have an account? </span>
          <a href="/register" class="text-blue-300 hover:underline">Sign Up</a>
        </div>
      </div>
      <script>
        const email = document.getElementById('email')
        const password = document.getElementById('password')
        const loginButton = document.getElementById('login-btn')
        loginButton.addEventListener('click', () => {

          fetch('http://joinin.nick-lemy.tech/auth/login/', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json' // sending JSON data
              },
              body: JSON.stringify({
                email: email.value,
                password_hash: password.value
              })
            }).then(response =>
              response.json()
            )
            .then(data => {
              if (data.login) {
                window.open('/', 'noopener,noreferrer')
              } else {
                alert('credential error')
              }
            })
            .catch(error => {
              console.error('Error:', error);
            });
        })
      </script>
    </div>
  </div>
</body>

</html>